{#
SPDX-FileCopyrightText: 2024 - 2025 Philip Okugbe
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: AGPL-3.0-or-later
#}

{#
See: https://github.com/misskey/misskey/blob/v0.10.0/.env.example
#}

# your domain, e.g https://example.com
APP_URL={{ misskey_environment_variable_app_url }}
PORT={{ misskey_container_http_port }}

# minimum of 32 characters. Generate one with: openssl rand -hex 32
APP_SECRET={{ misskey_environment_variable_app_secret }}

JWT_TOKEN_EXPIRES_IN={{ misskey_environment_variable_jwt_token_expires_in }}

DATABASE_URL={{ misskey_environment_variable_database_url }}
REDIS_URL={{ misskey_environment_variable_redis_url }}

# options: local | s3
STORAGE_DRIVER={{ misskey_environment_variable_storage_driver }}

{% if misskey_environment_variable_storage_driver == 's3' %}
# S3 driver config
AWS_S3_ACCESS_KEY_ID={{ misskey_environment_variable_aws_s3_access_key_id }}
AWS_S3_SECRET_ACCESS_KEY={{ misskey_environment_variable_aws_s3_secret_access_key }}
AWS_S3_REGION={{ misskey_environment_variable_aws_s3_region }}
AWS_S3_BUCKET={{ misskey_environment_variable_aws_s3_bucket }}
AWS_S3_ENDPOINT={{ misskey_environment_variable_aws_s3_endpoint }}
AWS_S3_FORCE_PATH_STYLE={{ misskey_environment_variable_aws_s3_force_path_style | to_json }}
{% endif %}

# default: 50mb
FILE_UPLOAD_SIZE_LIMIT={{ misskey_environment_variable_file_upload_size_limit }}

{% if misskey_mailer_enabled %}
# options: smtp | postmark
MAIL_DRIVER={{ misskey_environment_variable_mail_driver }}
MAIL_FROM_ADDRESS={{ misskey_environment_variable_mail_from_address }}
MAIL_FROM_NAME={{ misskey_environment_variable_mail_from_name }}

{% if misskey_environment_variable_mail_driver == "smtp" %}
# SMTP driver config
SMTP_HOST={{ misskey_environment_variable_smtp_host }}
SMTP_PORT={{ misskey_environment_variable_smtp_port }}
SMTP_USERNAME={{ misskey_environment_variable_smtp_username }}
SMTP_PASSWORD={{ misskey_environment_variable_smtp_password }}
SMTP_SECURE={{ misskey_environment_variable_smtp_secure | to_json }}
SMTP_IGNORETLS={{ misskey_environment_variable_smtp_ignoretls | to_json }}

{% elif misskey_environment_variable_mail_driver == "postmark" %}
# Postmark driver config
POSTMARK_TOKEN={{ misskey_environment_variable_postmark_token }}
{% endif %}
{% endif %}

# for custom drawio server
DRAWIO_URL={{ misskey_environment_variable_drawio_url }}

DISABLE_TELEMETRY={{ misskey_environment_variable_disable_telemetry | to_json }}

{{ misskey_environment_variables_additional_variables }}
